{"version":3,"file":"static/js/474.e0387d0b.chunk.js","mappings":"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","sources":["Pages/Egents/Internal.jsx","Pages/Egents/map/loaders/neshan_map_loader.js","Pages/Egents/map/NeshanMap.js"],"sourcesContent":["import React from \"react\";\r\nimport \"@neshan-maps-platform/mapbox-gl-react/dist/style.css\";\r\nimport NeshanMap from \"./map/NeshanMap\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"axios\";  \r\nimport { Helmet } from 'react-helmet-async';\r\nimport marker from './map marker.png';\r\nimport shadow from './marker-shadow.png';\r\nimport * as L from \"leaflet\"\r\nimport { ScaleLoader } from 'react-spinners'\r\n\r\nconst Internal = () => {\r\n  const token = useSelector(state => state.State.readToken)\r\n  const host = useSelector(state => state.State.host)\r\n  const [data, setData] = useState(null)\r\n  const [loading, setLoading] =useState(false)\r\n  const [select, setSelect] = useState(false)\r\n  const [activeAgent, setActiveAgent] = useState(null)\r\n  var redMarker = L.icon({\r\n    iconUrl: marker,\r\n    shadowUrl: shadow,\r\n    iconSize:     [25, 35], // size of the icon\r\n    shadowSize:   [25, 30], // size of the shadow\r\n    iconAnchor:   [10, 30], // point of the icon which will correspond to marker's location\r\n    shadowAnchor: [4, 25],  // the same for the shadow\r\n    popupAnchor:  [3, -32] // point from which the popup should open relative to the iconAnchor\r\n})\r\n  \r\n  useEffect(() => {\r\n    const GetData = async () => {\r\n      await axios.get(`${host}/api/internal-agents-names?populate=deep`, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        })\r\n      .then(res => {\r\n        setData(res.data.data)\r\n        setLoading(true)\r\n      })}\r\n    GetData()\r\n  },[host, token])\r\n\r\n  const handelClose = () => {\r\n    setSelect(false)\r\n  } \r\n  return (<> <Helmet>\r\n        <title> نمایندگان داخلی | کاشی و سرامیک ستاره  </title>\r\n      </Helmet>\r\n      {!loading && !data && <div className='flex justify-center items-center bg-white w-full h-[100vh] fixed top-0 fix z-50 top-[-25px]'>\r\n        <ScaleLoader\r\n          color={\"#db1010\"}\r\n          loading={!data}\r\n          size={50}\r\n          aria-label=\"Loading Spinner\"\r\n          data-testid=\"loader\"/></div>}\r\n      {loading && <div className=\"z-0 relative\">\r\n        {select && <div className=\"absolute top-0 left-0 h-[100vh] w-[350px] bg-[#010000cc]  z-10\">\r\n          <p onClick={handelClose} className=\"text-white mr-4 mt-3 text-[20px] ti-close\"></p>\r\n          <div className=\"flex-fix items-center justify-center opacity-100\">\r\n            <div className=\"flex items-center bg-white rounded-[50%] p-7 h-[180px] w-[180px] mt-12 mb-4\">\r\n            <img className=\"h-[100px]\" src={host + activeAgent.store.image.data.attributes.formats.small.url} alt=\"agent\"></img>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex flex-col justify-center items-start mt-8\">\r\n              <ul className=\"m-4\">\r\n              {activeAgent.egent.attributes.fullName ? \r\n                <li className=\"mb-8 flex items-center\"><span className=\"ml-4 ti-shopping-car text-white text-[20px]\"></span><span className=\"text-white text-[24px]\">{activeAgent.egent.attributes.fullName}</span> </li> :\r\n                <li className=\"mb-8 flex items-center\"><span className=\"text-white text-[35px]\">----------</span><span className=\"ml-4 ti-shopping-cart text-white text-[20px]\"></span> </li>}\r\n\r\n                {activeAgent.store.address ? \r\n                <li className=\"mb-2 flex items-center\"><span className=\"ml-4 ti-pin text-white text-[20px]\"></span><span className=\"text-white text-[17px]\">{activeAgent.store.address}</span> </li> :\r\n                <li className=\"mb-2 flex items-center\"><span className=\"text-white text-[25px]\">----------</span><span className=\"ml-4 ti-pin text-white text-[20px]\"></span> </li>}\r\n\r\n                {activeAgent.store.workHours ? <li className=\"mb-2 flex items-center\"><span className=\"ti-time text-[20px] text-white\"></span><span className=\" mr-4 text-white text-[17px]\">{activeAgent.store.workHours}</span></li> : \r\n                <li className=\"mb-2 flex items-center\"><span className=\"ml-4 ti-time text-[20px] text-white\"></span><span className=\" text-white text-[25px]\">----------</span></li>}\r\n                \r\n                {activeAgent.store.StoreNumber ? <li className=\"mb-2 flex items-center\"><span className=\"ti-headphone-alt text-[20px] text-white\"></span><span className=\"mr-4 text-white text-[17px]\">{activeAgent.store.StoreNumber}</span></li> :\r\n                <li className=\"mb-2 flex items-center\"><span className=\"ml-4 ti-headphone-alt text-[20px] text-white\"></span><span className=\"text-white text-[25px]\">----------</span></li>}\r\n          \r\n                {activeAgent.store.faxNumber ? <li className=\"mb-2 flex items-center\"><span className=\"ti-printer text-[20px] text-white\"></span><span className=\"mr-4 text-white text-[17px]\">{activeAgent.store.faxNumber}</span></li> :\r\n                <li className=\"mb-2 flex items-center\"><span className=\" ti-printer text-[20px] text-white\"></span><span className=\"mr-4 text-white text-[25px]\">----------</span></li>}\r\n              </ul>\r\n            </div>\r\n        </div>}\r\n        <NeshanMap \r\n          options={{\r\n            key: \"web.190d1e6563104d71873a7eb749cc2d2d\",\r\n            maptype: \"dreamy\",\r\n            poi: true,\r\n            traffic: false,\r\n            center: [31.874446863056157, 54.33401026695205],\r\n            zoom: 5,\r\n          }}\r\n          onInit={(L, myMap) => {\r\n            // eslint-disable-next-line\r\n            {data && data.map(egent => {\r\n              const elements = egent.attributes.store.map(store => {\r\n                const location = store.location.split(\",\");\r\n                const image = host + store.image.data.attributes.formats.small.url\r\n                return L.marker([location[0], location[1]], {\r\n                  icon: redMarker,\r\n                  fillOpacity: 0.5,\r\n                  radius: 500,\r\n                }).addTo(myMap)\r\n                .bindPopup(`<div class=\"flex-fix\"><img src=\"${image}\" /><b>${egent.attributes.fullName}</b>${store.name}</div>`)\r\n                .on('click', () => {setSelect(true)\r\n                setActiveAgent({egent, store})})\r\n              })\r\n              return elements\r\n            })}\r\n          }}>\r\n        </NeshanMap>\r\n    </div>}</>)}\r\n\r\nexport default Internal","const BASE_URL = \"https://static.neshan.org\";\r\nconst DEFAULT_URL = `${BASE_URL}/sdk/leaflet/1.4.0/leaflet.js`;\r\n\r\n// eslint-disable-next-line\r\nexport default (props) => {\r\n  const createScript = () => {\r\n    const { onLoad } = props;\r\n    const script = document.createElement(\"script\");\r\n\r\n    script.src = DEFAULT_URL;\r\n\r\n    script.onload = () => {\r\n      if (onLoad) onLoad();\r\n      return;\r\n    };\r\n\r\n\r\n    document.body.appendChild(script);\r\n  };\r\n\r\n  return createScript();\r\n};\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport neshan_map_loader from \"./loaders/neshan_map_loader\";\r\nimport \"./NeshanMap.css\";\r\n\r\nconst NeshanMap = (props) => {\r\n  const { style, options, onInit } = props;\r\n  const mapEl = useRef(null);\r\n  const [load,setLoad] = useState(true)\r\n\r\n  const defaultStyle = {\r\n    width: \"full\",\r\n    height: \"720px\",\r\n    margin: 0,\r\n    padding: 0,\r\n  };\r\n\r\n  const defaultOptions = {\r\n    key: \"web.190d1e6563104d71873a7eb749cc2d2d\",\r\n    maptype: \"dreamy\",\r\n    poi: true,\r\n    traffic: false,\r\n    center: [35.699739, 51.338097],\r\n    zoom: 14,\r\n  };\r\n\r\n  useEffect(() => {\r\n    neshan_map_loader(load && {\r\n      onLoad: () => {\r\n        setLoad(false)\r\n        let map = new window.L.Map(mapEl.current, { ...defaultOptions, ...options });\r\n        if (onInit) onInit(window.L, map);\r\n      },\r\n      onError: () => {\r\n        console.error(\"Neshan Maps Error: This page didn't load Neshan Maps correctly\");\r\n      },\r\n    });\r\n  });\r\n  return <div className=\"-z-0\" ref={mapEl}  style={{ ...defaultStyle, ...style }} />;\r\n};\r\n\r\nexport default NeshanMap;\r\n"],"names":["Internal","token","useSelector","state","State","readToken","host","data","setData","useState","loading","setLoading","select","setSelect","activeAgent","setActiveAgent","redMarker","L","iconUrl","marker","shadowUrl","shadow","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","useEffect","async","axios","get","concat","headers","Authorization","then","res","GetData","_jsxs","_Fragment","children","_jsx","Helmet","className","ScaleLoader","color","size","onClick","handelClose","src","store","image","attributes","formats","small","url","alt","egent","fullName","address","workHours","StoreNumber","faxNumber","NeshanMap","options","key","maptype","poi","traffic","center","zoom","onInit","myMap","map","location","split","icon","fillOpacity","radius","addTo","bindPopup","name","on","DEFAULT_URL","props","style","mapEl","useRef","load","setLoad","defaultOptions","createScript","onLoad","script","document","createElement","onload","body","appendChild","neshan_map_loader","window","Map","current","onError","console","error","ref","width","height","margin","padding"],"sourceRoot":""}