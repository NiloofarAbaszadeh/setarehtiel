"use strict";(self.webpackChunksetarehtile=self.webpackChunksetarehtile||[]).push([[380],{81380:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var t=a(72791),r=a(59434),l=a(55294),d=a(11087),n=a(80184);const c=()=>{const e=(0,r.v9)((e=>e.State.readToken)),s=(0,r.v9)((e=>e.State.host)),a=(0,r.v9)((e=>e.State.sendToken)),[d,c]=(0,t.useState)(),[i,x]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),[o,h]=(0,t.useState)(!1),[u,j]=(0,t.useState)(!1),[w,f]=(0,t.useState)({oldpassword:"",newpassword1:"",newpassword2:""}),N=e=>{p(!1),h(!1),j(!1);const{name:s,value:a}=e.target;f((e=>({...e,[s]:a})))};return(0,t.useEffect)((()=>{(async()=>{const a=localStorage.getItem("userInfo");try{await l.Z.get("".concat(s,"/api/karbrans?filters[username]=").concat(a),{headers:{Authorization:"Bearer ".concat(e)}}).then((e=>{c({id:e.data.data[0].id,username:e.data.data[0].attributes.username,password:e.data.data[0].attributes.password}),x(!0)}))}catch(t){console.log(t)}})()}),[s,e]),(0,n.jsx)(n.Fragment,{children:i&&(0,n.jsxs)("div",{className:"flex flex-col items-start justify-center w-full mt-12",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("span",{className:"ti-unlock ml-2 text-[18px]"}),(0,n.jsx)("span",{className:"text-[22px] mb-6",children:"\u062a\u063a\u06cc\u06cc\u0631 \u06a9\u0644\u0645\u0647 \u0639\u0628\u0648\u0631"})]}),(0,n.jsxs)("div",{className:"box-shadow bg-white p-8 rounded-[15px] w-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between xs:flex-col",children:[(0,n.jsxs)("div",{className:"w-[20vw] xs:w-[60vw]",children:[(0,n.jsxs)("div",{className:"mt-[5px] text-darkgray mb-[10px]",children:["\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc",(0,n.jsx)("span",{className:"text-[#fb4f58]",children:" * "})]}),(0,n.jsx)("input",{type:"text",name:"oldpassword",placeholder:"\u0631\u0645\u0632 \u0641\u0639\u0644\u06cc",onChange:N,value:w.user,className:"py-[13px] px-[15px] text-md leading-[initial] w-full border-[1px] border-solid border-[#dfdfdf] rounded-[8px]",required:!0})]}),(0,n.jsxs)("div",{className:"w-[20vw] xs:w-[60vw]",children:[(0,n.jsxs)("div",{className:"mt-[5px] mb-[10px]",children:["\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",(0,n.jsx)("span",{className:"text-[#fb4f58]",children:" * "})]}),(0,n.jsx)("input",{type:"password",name:"newpassword1",placeholder:"\u0631\u0645\u0632 \u062c\u062f\u06cc\u062f",onChange:N,value:w.password,className:"py-[13px] px-[15px] text-md leading-[initial] w-full border-[1px] border-solid border-[#dfdfdf] rounded-[8px]",required:!0})]}),(0,n.jsxs)("div",{className:"w-[20vw] xs:w-[60vw]",children:[(0,n.jsxs)("div",{className:"mt-[5px] mb-[10px]",children:["\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",(0,n.jsx)("span",{className:"text-[#fb4f58]",children:" * "})]}),(0,n.jsx)("input",{type:"password",name:"newpassword2",placeholder:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u062c\u062f\u06cc\u062f",onChange:N,value:w.password,className:"py-[13px] px-[15px] text-md leading-[initial] w-full border-[1px] border-solid border-[#dfdfdf] rounded-[8px]",required:!0})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-end",children:[(0,n.jsxs)("div",{className:"mt-4",children:[m?(0,n.jsx)("span",{className:"pt-4 ml-4 c-c-red",children:"\u0644\u0637\u0641\u0627 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc \u0631\u0627 \u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}):(0,n.jsx)(n.Fragment,{}),o?(0,n.jsx)("span",{className:"pt-4 ml-4 c-c-red",children:"\u0644\u0637\u0641\u0627 \u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u0631\u0627 \u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}):(0,n.jsx)(n.Fragment,{}),u?(0,n.jsx)("span",{className:"pt-4 ml-4 c-c-red",children:"\u0631\u0645\u0632 \u0639\u0628\u0648\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u062a\u063a\u06cc\u06cc\u0631 \u06cc\u0627\u0641\u062a !"}):(0,n.jsx)(n.Fragment,{})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{className:"button-custom w-auto mt-[20px] bg-red text-white hover:bg-red",onClick:async e=>{e.preventDefault();const t=localStorage.getItem("userInfo");if(d.password===w.oldpassword)if(w.newpassword1===w.newpassword2)try{await l.Z.put("".concat(s,"/api/karbrans?filters[username]=").concat(t,"&filters[password]=").concat(w.oldpassword),{data:{password:w.newpassword2}},{headers:{Authorization:"Bearer ".concat(a)}}).then((e=>{j(!0)}))}catch(r){}else h(!0);else p(!0)},children:" \u062a\u0627\u06cc\u06cc\u062f "})})]})]})]})})},i=()=>{const e=(0,r.v9)((e=>e.State.readToken)),s=(0,r.v9)((e=>e.State.host)),[a,i]=(0,t.useState)(),[x,m]=(0,t.useState)();return(0,t.useEffect)((()=>{(async()=>{const a=localStorage.getItem("userInfo");await l.Z.get("".concat(s,"/api/karbrans?filters[username]=").concat(a,"&populate=deep"),{headers:{Authorization:"Bearer ".concat(e)}}).then((e=>{localStorage.setItem("userId",e.data.data[0].id),i(e.data.data[0])})),await l.Z.get("".concat(s,"/api/external-agents?filters[personeli]=").concat(a,"&populate=deep"),{headers:{Authorization:"Bearer ".concat(e)}}).then((e=>{0!==e.data.data.length&&m(e.data.data[0].attributes.store)})),await l.Z.get("".concat(s,"/api/internal-agents-names?filters[personeli]=").concat(a,"&populate=deep"),{headers:{Authorization:"Bearer ".concat(e)}}).then((e=>{0!==e.data.data.length&&m(e.data.data[0].attributes.store)}))})()}),[s,e]),(0,n.jsx)("div",{className:"flex justify-center items-center ml-24",children:a&&(0,n.jsxs)("div",{className:"flex items-start flex-col w-[65vw] lg:w-[80vw] sm:mx-4",children:[(0,n.jsxs)("div",{className:"mb-4 flex items-center justify-between w-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"ti-id-badge text-[30px]  ml-4 mb-[3px]"}),(0,n.jsx)("span",{className:"text-[24px] font-semibold ",children:"\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u0628\u0631\u06cc"})]}),(0,n.jsx)("div",{children:(0,n.jsx)(d.rU,{to:"./edit-profile-image",replace:!0,children:(0,n.jsxs)("div",{className:"flex button-custom items-center justify-center mt-0 mb-8 bg-red text-white hover:bg-red w-full",children:[(0,n.jsx)("span",{children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0639\u06a9\u0633"}),(0,n.jsx)("span",{className:"ti-pencil mr-2"})]})})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-[10px] p-12 box-shadow grid grid-cols-4 sm:flex sm:flex-col sm:items-center w-full relative z-10 user-card",children:[(0,n.jsx)("div",{className:"w-[15vw] h-full sm:w-[32vw] sm:flex sm:items-center sm:flex-col z-30",children:(0,n.jsx)("div",{className:"flex items-center h-full",children:(0,n.jsx)("img",{className:"rounded-[50%]  bg-white ",width:450,height:450,src:s+a.attributes.profileImage.data.attributes.formats.custom.url,alt:"\u0639\u06a9\u0633 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644"})})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 bg-white p-6 col-span-3 sm:mt-8",children:[(0,n.jsx)("div",{className:"px-8 py-2",children:(0,n.jsx)("span",{className:"text-[18px] font-semibold",children:a.attributes.fullName})}),"\u0646\u0645\u0627\u06cc\u0646\u062f\u0647"===a.attributes.role&&(0,n.jsxs)("div",{className:"px-8 py-2",children:[(0,n.jsx)("span",{className:"text-[16px] text-gray",children:"\u0634\u0645\u0627\u0631\u0647 \u067e\u0631\u0633\u0646\u0644\u06cc:"}),(0,n.jsx)("span",{className:"text-[16px] mr-1",children:null!==a.attributes.username?a.attributes.username:"---"})]}),(0,n.jsxs)("div",{className:"px-8 py-2",children:[(0,n.jsx)("span",{className:"text-[16px] text-gray",children:"\u0627\u06cc\u0645\u06cc\u0644:"}),(0,n.jsx)("span",{className:"text-[16px] mr-1",children:null!==a.attributes.email?a.attributes.email:"---"})]}),(0,n.jsxs)("div",{className:"px-8 py-2",children:[(0,n.jsx)("span",{className:"text-[16px] text-gray",children:"\u0633\u0645\u062a:"}),(0,n.jsx)("span",{className:"text-[16px] mr-1",children:"\u0627\u062f\u0645\u06cc\u0646"===a.attributes.role?"\u0627\u0646\u0641\u0648\u0631\u0645\u0627\u062a\u06cc\u06a9":a.attributes.role})]}),(0,n.jsxs)("div",{className:"px-8 py-2",children:[(0,n.jsx)("span",{className:"text-[16px] text-gray",children:"\u0634\u0631\u06a9\u062a:"}),(0,n.jsx)("span",{className:"text-[16px] mr-1",children:a.attributes.company})]})]})]}),x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mb-4 mt-12 flex items-center",children:[(0,n.jsx)("span",{className:"ti-shopping-cart text-[30px]  ml-4 mb-[3px]"}),(0,n.jsx)("span",{className:"text-[24px] font-semibold ",children:"\u0641\u0631\u0648\u0634\u06af\u0627\u0647 \u0647\u0627"})]}),(0,n.jsx)("div",{className:"flex items-start justify-center flex-col  w-full ",children:x.map(((e,a)=>(0,n.jsxs)("div",{className:"w-full flex items-center justify-start sm:flex-col sm:items-start box-shadow bg-white rounded-[10px] mb-4 user-card2 p-0",children:[(0,n.jsx)("div",{className:" user-card2 max-w-[30vw] lg:max-w-[40vw] sm:max-w-[100vw]",children:(0,n.jsx)("img",{className:"rounded-tr-[10px] rounded-br-[10px] sm:rounded-br-[0px] ",src:s+e.image.data.attributes.formats.custom.url,alt:"\u0639\u06a9\u0633 \u0641\u0631\u0648\u0634\u06af\u0627\u0647"})}),(0,n.jsxs)("div",{className:"z-10 mr-8",children:[0===a?(0,n.jsxs)("div",{className:"mb-[8px] text-[16px]",children:[(0,n.jsx)("span",{className:""}),(0,n.jsxs)("span",{className:"text-gray",children:["\u0634\u0639\u0628\u0647 ",a+1," : "]})," ",(0,n.jsx)("span",{children:e.name})]}):(0,n.jsxs)("div",{className:"mb-[8px] text-[16px] w-100",children:[(0,n.jsx)("span",{className:""}),(0,n.jsxs)("span",{className:"text-gray",children:["\u0634\u0639\u0628\u0647 ",a+1," : "]})," ",(0,n.jsx)("span",{children:e.name})]}),(0,n.jsxs)("div",{className:"mb-[8px] text-[16px]",children:[(0,n.jsx)("span",{className:""}),(0,n.jsx)("span",{className:"text-gray",children:"\u0622\u062f\u0631\u0633 \u0641\u0631\u0648\u0634\u06af\u0627\u0647 : "})," ",(0,n.jsx)("span",{children:e.address?e.address:"-"})]}),(0,n.jsxs)("div",{className:"mb-[8px] text-[16px]",children:[(0,n.jsx)("span",{className:""}),(0,n.jsx)("span",{className:"text-gray",children:"\u0634\u0645\u0627\u0631\u0647 \u062a\u0645\u0627\u0633 : "})," ",(0,n.jsx)("span",{children:e.StoreNumber?e.StoreNumber:"-"})]}),(0,n.jsxs)("div",{className:"mb-[8px] text-[16px]",children:[(0,n.jsx)("span",{className:""}),(0,n.jsx)("span",{className:"text-gray",children:"\u0634\u0645\u0627\u0631\u0647 \u0641\u06a9\u0633 : "})," ",(0,n.jsx)("span",{children:e.faxNumber?e.faxNumber:"-"})]}),(0,n.jsxs)("div",{className:"mb-[8px] text-[16px]",children:[(0,n.jsx)("span",{className:""}),(0,n.jsx)("span",{className:"text-gray",children:"\u0633\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u06cc : "})," ",(0,n.jsx)("span",{children:e.workHours?e.workHours:"-"})]})]})]},a)))})]}),(0,n.jsx)(c,{})]})})}}}]);
//# sourceMappingURL=380.2dce3290.chunk.js.map